# Cookie and Session

## HTTP

웹서비스에서는 클라이언트와 서버가 HTTP통신을 하는데 HTTP 는 상태를 저장하지 않는다.(사용자 구별X) ('Stateless' 하다)
- 클라이언트의 요청 (GET http://spartcodingclub.kr)을 서버에게 보낸 후 응답을 받을 때까지가 하나의 HTTP 요청이다. 
- 하지만 HTTP 상태는 기억되지 않기 때문에 웹 서버에서는 1번과 2번이 같은 클라이언트의 요청인지 알 수 없다.

쿠키와 세션 모두 HTTP 에 상태 정보를 유지(Stateful)하기 위해 사용됩니다. 즉, 쿠키와 세션을 통해 서버에서는 클라이언트 별로 인증 및 인가를 할 수 있게 됩니다. 

## Cookie

- **클라이언트에 저장**될 목적으로 생성한 작은 정보를 담은 파일 입니다.
- 구성요소
    - **Name** (이름): 쿠키를 구별하는 데 사용되는 키 (중복될 수 없음)
    - **Value** (값): 쿠키의 값
    - Domain (도메인): 쿠키가 저장된 도메인
    - Path (경로): 쿠키가 사용되는 경로
    - Expires (만료기한): 쿠키의 만료기한 (만료기한 지나면 삭제됩니다.)

## Session

  - 서버에서 일정시간 동안 클라이언트 상태를 유지하기 위해 사용
  - 서버에서 클라이언트 별로 **유일무이한 '세션 ID'** 를 부여한 후 클라이언트 별 필요한 정보를 **서버에 저장**
  - 서버에서 생성한 '세션 ID' 는 클라이언트의 쿠키값('세션 쿠키' 라고 부름)으로 저장되어 클라이언트 식별에 사용됨
  - 세션 동작 방식
> Session도 Cookie값이 필요

## 쿠키와 세션 비교

||Cookie|Session|
|---|---|---|
|설명|	클라이언트에 저장될 목적으로 생성한 작은 정보를 담은 파일|	서버에서 일정시간 동안 클라이언트 상태를 유지하기 위해 사용|
|저장 위치|	클라이언트 (웹 브라우져)|	웹 서버|
|사용 예|	사이트 팝업의 "오늘 다시보지 않기" 정보 저장|	로그인 정보 저장|
|만료 시점|	쿠키 저장 시 만료일시 설정 가능<br>(브라우져 종료시도 유지 가능)|	1. 브라우져 종료 시까지<br> 2. 클라이언트 로그아웃 시까지<br> 3. 서버에 설정한 유지기간까지 해당 클라이언트의 재요청이 없는 경우|
|용량 제한|	브라우져 별로 다름 (크롬 기준)<br> - 하나의 도메인 당 180개<br> - 하나의 쿠키 당 4KB(=4096byte)|	개수 제한 없음<br> (단, 세션 저장소 크기 이상 저장 불가능)|
|보안|	취약<br>(클라이언트에서 쿠키 정보를 쉽게 변경, 삭제 및 가로채기 당할 수 있음)	|비교적 안전<br>(서버에 저장되기 때문에 상대적으로 안전)|
